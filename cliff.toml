# git-cliff ~ default configuration file
# https://git-cliff.org/docs/configuration

[changelog]
trim = true
header = """
# Changelog\n
"""
body = """
{% if version %}\
    ## {{ version | trim_start_matches(pat="v") }} - {{ timestamp | date(format="%Y-%m-%d") }}\
{% else %}\
    ## Unreleased\
{% endif %}\
{% for group, commits in commits | group_by(attribute="group") %}
    {% for commit in commits %}\
        - {% if group != "none" %}{{ group }}: {% endif %}{% if commit.breaking %}[**breaking**] {% endif %}{{ commit.message | upper_first }} \
        - [{{ commit.id | truncate(length=7, end="") }}](https://github.com/fujidaiti/smooth_sheets/commit/{{ commit.id }})
        {% if commit.breaking and commit.breaking_description != commit.message -%}
        {% raw %}  {% endraw %}- {{commit.breaking_description}}
        {% endif -%}
    {% endfor %}\
{% endfor %}\n
"""

# Append legacy CHANGELOG at the bottom
footer = """
## 0.2.0 - 2024-01-28 

- Add a showcase that uses TextFields in a sheet ([#2](https://github.com/fujidaiti/smooth_sheets/pull/2))
- Dispatch a Notification when the sheet extent changes ([#4](https://github.com/fujidaiti/smooth_sheets/pull/4))
- Add a way to dismiss the on-screen keyboard when the sheet is dragged ([#8](https://github.com/fujidaiti/smooth_sheets/pull/8))

## 0.1.0 - 2024-01-02

- Initial release
"""

[git]
# The changes for these versions are manually added as the footer
skip_tags = "v0.[12].0"
conventional_commits = true
filter_unconventional = false
split_commits = false
topo_order = false
sort_commits = "newest"
commit_preprocessors = [
  # add the link to the corresponding github pull request
  { pattern = "\\(#([0-9]+)\\)", replace = "([#${1}](https://github.com/fujidaiti/smooth_sheets/pull/${1}))" },
]
commit_parsers = [
  { message = '^[fF]ix\(ci|example|env\)', skip = true },
  { message = "^[fF]ix", group = "fix" },
  { message = '^feat\(ci|example|env\)', skip = true },
  { message = "^feat", group = "feat" },
  { message = '^build\(ci|example|env\)', skip = true },
  { message = "^build", group = "build" },
  { message = '^revert\(ci|example|env\)', skip = true },
  { message = "^revert", group = "revert" },
  { message = "^docs", skip = true },
  { message = "^style", skip = true },
  { message = "^chore", skip = true },
  { message = "^test", skip = true },
  { message = "^refactor", skip = true },
  { message = ".*", group = "none"},
]

[bump]
features_always_bump_minor = true
# a minor version is updated if the major version is 0,
# otherwise a major version is updated
breaking_always_bump_major = false

