# git-cliff ~ default configuration file
# https://git-cliff.org/docs/configuration

[changelog]
trim = true
header = """
# Changelog\n
All notable changes to this project will be documented in this file.\n
"""
body = """
{% if version %}\
    ## {{ version | trim_start_matches(pat="v") }} - {{ timestamp | date(format="%Y-%m-%d") }}\
{% else %}\
    ## Unreleased\
{% endif %}\
{% for group, commits in commits | group_by(attribute="group") %}
    {% for commit in commits %}\
        - {% if group != "none" %}{{ group }}: {% endif %}{% if commit.breaking %}[**breaking**] {% endif %}{{ commit.message | upper_first }}
        {% if commit.breaking and commit.breaking_description != commit.message -%}
        {% raw %}  {% endraw %}- {{commit.breaking_description}}
        {% endif -%}
    {% endfor %}\
{% endfor %}\n
"""

[git]
conventional_commits = true
filter_unconventional = false
split_commits = false
commit_preprocessors = [
  # add the link to the corresponding github pull request
  { pattern = "\\(#([0-9]+)\\)", replace = "([#${1}](https://github.com/fujidaiti/smooth_sheets/pull/${1}))" },
]
commit_parsers = [
  { message = "^[fF]ix", group = "fix" },
  { message = "^feat", group = "feat" },
  { message = "^build", group = "build" },
  { message = "^docs", skip = true },
  { message = "^style", skip = true },
  { message = "^chore", skip = true },
  { message = "^ci", skip = true },
  { message = "^test", skip = true },
  { message = "^refactor", skip = true },
  { message = ".*", group = "none"},
]
topo_order = false
sort_commits = "newest"

[bump]
features_always_bump_minor = true
# a minor version is updated if the major version is 0,
# otherwise a major version is updated
breaking_always_bump_major = false

